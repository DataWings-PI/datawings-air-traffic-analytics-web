<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DataWings - Dashboard</title>
    <link rel="stylesheet" href="css/empresas.css">

</head>

<body>

    <!-- ====== CABEÇALHO ====== -->
    <header class="header">
        <div class="content">
            <div class="logo">
                <img src="../assets/logoLaranja-removebg-preview.png" alt="">
            </div>
        </div>
        <div class="user-icon"></div>
    </header>

    <!-- ====== CONTEÚDO PRINCIPAL ====== -->
    <main class="main">
        <div class="contain-2">
            <!-- Tabela -->

            <div class="form-relatorio">
                <form class="card-relatorio">
                    <h2>Cadastrar empresa</h2>

                    <label>Nome Fantasia</label>
                    <input type="text" id="nome_fantasia" placeholder="Digite o nome Fantasia">

                    <label>Razão social</label>
                    <input type="text" id="razao_social" placeholder="Digite o Razão Social">

                    <label>CNPJ</label>
                    <input type="text" id="cnpj" placeholder="Digite o cnpj">

                    <h2>Contato</h2>

                    <label>Telefone</label>
                    <input type="text" id="numero" placeholder="Digite o Telefone">

                    <label>Tipo do número</label>
                    <select id="tipo_num">
                        <option value="fixo">Fixo</option>
                        <option value="móvel">Móvel</option>
                    </select>

                    <label>Departamento</label>
                    <input type="text" id="departamento" placeholder="Digite o Departamento">

                    <h2>Endereço</h2>

                    <label>Apelido</label>
                    <input type="text" id="apelido" placeholder="Digite o Apelido">

                    <label>Cep</label>
                    <input type="text" id="cep" placeholder="Digite o Cep">

                    <label>Logradouro</label>
                    <input type="text" id="logradouro" placeholder="Digite o Logradouro">

                    <label>Bairro</label>
                    <input type="text" id="bairro" placeholder="Digite o Bairro">

                    <label>Cidade</label>
                    <input type="text" id="cidade" placeholder="Digite o Cidade">

                    <label>Unidade Federativa</label>
                    <input type="text" id="uf" placeholder="Digite o Unidade Federativa">

                    <label>Número</label>
                    <input type="text" id="numero" placeholder="Digite o Número">

                    <label>Complemento</label>
                    <input type="text" id="complemento" placeholder="Digite o Complemento">

                    <button type="submit">Cadastrar</button>
                </form>
            </div>


            <div class="tabela-scroll">
                <table id="voosTable">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Nome</th>
                            <th>Criado em:</th>
                            <th>Excluir</th>
                            <th>Definir status</th>

                        </tr>
                    </thead>
                    <tbody id="tabela_empresas">



                    </tbody>
                </table>
            </div>
        </div>
    </main>

</body>

</html>

<script>
    function carregarEmpresas() {
        fetch("http://localhost:8080/empresas/listar")
            .then(resposta => resposta.json())
            .then(empresas => {

                let tabela = document.getElementById("tabela_empresas");
                tabela.innerHTML = ""; 

                empresas.forEach(empresa => {

                    let textoStatus = empresa.status ? "Ativo" : "Inativo";
                    let classeStatus = empresa.status ? "btn-ativo" : "btn-inativo";

                    tabela.innerHTML += `
                        <tr>
                            <td>${empresa.id}</td>
                            <td>${empresa.razao_social}</td>
                            <td>${empresa.data_criacao}</td>
                            <td><button class="btn-excluir">Excluir</button></td>
                            <td><button class="${classeStatus}">${textoStatus}</button></td>
                        </tr>
                    `;
                });
            })
            .catch(erro => {
                console.log("Erro ao listar empresas:", erro);
            });
    }

    carregarEmpresas();
</script>
